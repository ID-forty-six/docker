server {
	listen 8080;

    access_log /var/www/log/phpmyadmin.log;
    error_log  /var/www/log/phpmyadmin.log;

	server_name _;

	location /phpmyadmin/ {

		root /usr/share/;

		# Add index.php to the list if you are using PHP
		index index.php index.html index.htm index.nginx-debian.html;

		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		try_files $uri $uri/ =404;

		auth_basic "Admin Login";
		auth_basic_user_file /etc/nginx/basic_auth;

		location ~ \.php$ {
			include snippets/fastcgi-php.conf;
			fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
		#	# With php7.1-fpm:
			fastcgi_pass unix:/run/php/php7.1-fpm.sock;
		}

		location ~* \.(ico|css|js)(\?[0-9]+)?$ {
			expires max;
			log_not_found off;
		}

		location /phpmyadmin/libraries {
			deny all;
		}
		location /phpmyadmin/setup/lib {
			deny all;
		}
		location ~* /\. {
			deny all;
		}
	}

}
